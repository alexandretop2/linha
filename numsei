local player = game.Players.LocalPlayer
local car = player.Character and player.Character:FindFirstChild("HumanoidRootPart")

local recordedPath = {} -- Lista de pontos do traÃ§ado
local lineEnabled = false
local decorating = false

-- ðŸ“Œ Criar um ponto na linha
local function createPoint(position, color)
    local part = Instance.new("Part")
    part.Size = Vector3.new(0.5, 0.5, 0.5)
    part.Position = position
    part.Anchored = true
    part.CanCollide = false
    part.Color = color
    part.Transparency = 0.5
    part.Parent = workspace
    return part
end

-- ðŸ“Œ Criar decoraÃ§Ã£o (cones, placas)
local function createDecoration(position)
    local cone = Instance.new("Part")
    cone.Size = Vector3.new(1, 2, 1)
    cone.Position = position + Vector3.new(0, 1, 0)
    cone.Anchored = true
    cone.CanCollide = false
    cone.Color = Color3.fromRGB(255, 150, 0)
    cone.Parent = workspace
end

-- ðŸ“Œ Registrar TrajetÃ³ria
local function recordPath()
    while lineEnabled do
        if car then
            local speed = car.Velocity.Magnitude
            local color = Color3.fromRGB(255, 255, 255) -- Branco (Normal)

            -- ðŸ”´ Vermelho = Muito rÃ¡pido na curva
            if speed > 100 then 
                color = Color3.fromRGB(255, 0, 0) 
            end
            -- ðŸŸ¢ Verde = Acelerar
            if speed < 30 then 
                color = Color3.fromRGB(0, 255, 0) 
            end

            local point = createPoint(car.Position, color)
            table.insert(recordedPath, point)

            -- Criar decoraÃ§Ã£o se estiver ativado
            if decorating then
                createDecoration(car.Position)
            end
        end
        task.wait(0.5)
    end
end

-- ðŸ“Œ Ativar Linha
local function toggleLine()
    lineEnabled = not lineEnabled
    if lineEnabled then
        recordPath()
    else
        -- Apagar a linha
        for _, point in pairs(recordedPath) do
            point:Destroy()
        end
        recordedPath = {}
    end
end

-- ðŸ“Œ Ativar DecoraÃ§Ã£o
local function toggleDecoration()
    decorating = not decorating
end

-- ðŸ“Œ Criar GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

local activateButton = Instance.new("TextButton")
activateButton.Size = UDim2.new(0, 100, 0, 50)
activateButton.Position = UDim2.new(0.8, 0, 0.1, 0)
activateButton.Text = "Ativar Linha"
activateButton.Parent = screenGui

activateButton.MouseButton1Click:Connect(function()
    toggleLine()
    activateButton.Text = lineEnabled and "Desativar Linha" or "Ativar Linha"
end)

local decorateButton = Instance.new("TextButton")
decorateButton.Size = UDim2.new(0, 100, 0, 50)
decorateButton.Position = UDim2.new(0.8, 0, 0.2, 0)
decorateButton.Text = "Decorar Pista"
decorateButton.Parent = screenGui

decorateButton.MouseButton1Click:Connect(function()
    toggleDecoration()
    decorateButton.Text = decorating and "Parar DecoraÃ§Ã£o" or "Decorar Pista"
end)
